webpackJsonp([17],{"/Rd0":function(e,t,i){var a=i("k0EI");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("9b2d7eca",a,!0)},"8yQR":function(e,t,i){"use strict";var a=i("Dd8w"),o=i.n(a),r=i("//Fk"),n=i.n(r),l=i("NYxO"),s=i("vLgD"),m=i("mw3O"),u=i.n(m);t.a={data:function(){return{zhuanyiFormVisible:!1,editdialogFormVisible:!1,adminformState:{u_username:"",u_password:"",role_id:"",permissionLevel:"",tel:"",u_bz:"",email:"",superior:""},zhuanyiForm:{target:"",origin:""},groupList:[],superior:[],managerEdit:!1,rules:{},RoleName:[],ifshowsuperior:!0}},methods:{addInfo:function(){this.edit=!1,this.editdialogFormVisible=!0,this.managerEdit=!1},beforeclose:function(e){var t=this;return new n.a(function(e,i){t.adminformState={u_username:"",u_password:"",role_id:"",permissionLevel:"",tel:"",u_bz:"",email:"",superior:""},e(!0)}).then(function(t){e()})},refister:function(){var e=this;this.managerEdit?Object(s.a)({method:"post",url:"/permission/editManager",data:u.a.stringify(this.adminformState)}).then(function(){e.editdialogFormVisible=!1,e.managerEdit=!1,e.$store.dispatch("GetAdminInfo",{exit:0}).then(function(){console.log("GetAdminInfo"),e.loading=!1})}):Object(s.a)({method:"post",url:"/permission/register",data:u.a.stringify(this.adminformState)}).then(function(){e.editdialogFormVisible=!1,e.$store.dispatch("GetAdminInfo",{exit:0}).then(function(){console.log("GetAdminInfo"),e.loading=!1})})},editManager:function(e,t){var i=this;this.managerEdit=!0,this.adminformState.u_id=t[e].u_id,Object(s.a)({url:"/permission/getManagerUser",method:"get",params:{role_id:t[e].role_id}}).then(function(e){i.superior=e.data}),Object(s.a)({method:"get",url:"/permission/getManagerSingle",params:{u_id:t[e].u_id}}).then(function(e){i.adminformState=e.formdata,i.editdialogFormVisible=!0})},zhuanyiZiyuan:function(e,t){this.zhuanyiFormVisible=!0,this.zhuanyiForm.origin=t[e].u_id},zhuanyiSure:function(){Object(s.a)({method:"post",url:"/permission/zhuanyiziyuan",data:u.a.stringify(this.zhuanyiForm)})},deleManager:function(e,t){var i=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.a)({method:"post",url:"/permission/deleUser",data:u.a.stringify({u_id:t[e].u_id})}).then(function(e){i.$store.dispatch("GetAdminInfo")})})},showsuperior:function(e){var t=this;1===e?this.ifshowsuperior=!this.ifshowsuperior:(this.ifshowsuperior=!0,Object(s.a)({url:"/permission/getManagerUser",method:"get",params:{role_id:e}}).then(function(e){t.superior=e.data}))}},computed:o()({},Object(l.b)(["adminInfo","roles","zhuanyiList"])),mounted:function(){var e=this;Object(s.a)({url:"/permission/getrolename",method:"get"}).then(function(t){e.RoleName=t.data})},beforeCreate:function(){var e=this;this.$store.getters.adminInfo||this.$store.dispatch("GetAdminInfo",{exit:0}).then(function(){console.log("GetAdminInfo"),e.loading=!1}),this.$store.getters.zhuanyilist||this.$store.dispatch("getzhuanyiList").then(function(){console.log("getzhuanyiList"),e.loading=!1})}}},IJJv:function(e,t,i){"use strict";function a(e){i("/Rd0")}Object.defineProperty(t,"__esModule",{value:!0});var o=i("8yQR"),r=i("xoEf"),n=i("VU/8"),l=a,s=n(o.a,r.a,!1,l,null,null);t.default=s.exports},k0EI:function(e,t,i){t=e.exports=i("FZ+f")(!0),t.push([e.i,".dr-datatable{margin-bottom:1em}.search{width:20%}","",{version:3,sources:["C:/Users/Administrator/Desktop/git/web/ppxt-vue/src/views/permission/manager.vue"],names:[],mappings:"AACA,cACE,iBAAmB,CACpB,AACD,QACE,SAAW,CACZ",file:"manager.vue",sourcesContent:["\n.dr-datatable {\n  margin-bottom: 1em;\n}\n.search {\n  width: 20%;\n}\n"],sourceRoot:""}])},xoEf:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{staticClass:"dr-datatable"},[i("el-col",{attrs:{span:24}},[i("el-row",{staticClass:"dr-datatable"},[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addInfo}},[e._v("新建")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.adminInfo,border:""}},[i("el-table-column",{attrs:{prop:"u_id",label:"#",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"u_username",label:"管理员姓名",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"role_name",label:"所属分组",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"tel",label:"电话",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"u_bz",label:"备注",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.editManager(t.$index,e.adminInfo)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.deleManager(t.$index,e.adminInfo)}}},[e._v("删除")]),e._v(" "),1!==e.adminInfo[t.$index].permissionLevel&&2!==e.adminInfo[t.$index].permissionLevel&&5!==e.adminInfo[t.$index].permissionLevel?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.zhuanyiZiyuan(t.$index,e.adminInfo)}}},[e._v("\n                              资源转移\n                              ")]):e._e()]}}])})],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:e.editdialogFormVisible,"before-close":e.beforeclose},on:{"update:visible":function(t){e.editdialogFormVisible=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.adminformState,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"账号",prop:"u_username"}},[i("el-input",{attrs:{size:"small"},model:{value:e.adminformState.u_username,callback:function(t){e.$set(e.adminformState,"u_username",t)},expression:"adminformState.u_username"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"u_password"}},[i("el-input",{attrs:{size:"small"},model:{value:e.adminformState.u_password,callback:function(t){e.$set(e.adminformState,"u_password",t)},expression:"adminformState.u_password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所属分组",prop:"role_id"}},[i("el-select",{attrs:{size:"small",placeholder:"请选择分组"},on:{change:e.showsuperior},model:{value:e.adminformState.role_id,callback:function(t){e.$set(e.adminformState,"role_id",t)},expression:"adminformState.role_id"}},e._l(e.RoleName,function(e){return i("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})}))],1),e._v(" "),e.ifshowsuperior?i("el-form-item",{attrs:{label:"所属上级",prop:"superior"}},[i("el-select",{attrs:{size:"small",placeholder:"请选择上级"},model:{value:e.adminformState.superior,callback:function(t){e.$set(e.adminformState,"superior",t)},expression:"adminformState.superior"}},e._l(e.superior,function(e){return i("el-option",{key:e.u_id,attrs:{label:e.u_username,value:e.u_id}})}))],1):e._e(),e._v(" "),e.ifshowsuperior?i("el-form-item",{attrs:{label:"权限等级",prop:"superior"}},[i("el-select",{attrs:{size:"small",placeholder:"请选择权限等级"},model:{value:e.adminformState.permissionLevel,callback:function(t){e.$set(e.adminformState,"permissionLevel",t)},expression:"adminformState.permissionLevel"}},e._l(7,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"电话号码",prop:"tel"}},[i("el-input",{attrs:{placeholder:"",size:"small"},model:{value:e.adminformState.tel,callback:function(t){e.$set(e.adminformState,"tel",t)},expression:"adminformState.tel"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"u_bz"}},[i("el-input",{attrs:{placeholder:"",size:"small"},model:{value:e.adminformState.u_bz,callback:function(t){e.$set(e.adminformState,"u_bz",t)},expression:"adminformState.u_bz"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[i("el-input",{attrs:{placeholder:"请输入邮箱",size:"small"},model:{value:e.adminformState.email,callback:function(t){e.$set(e.adminformState,"email",t)},expression:"adminformState.email"}})],1),e._v(" "),i("el-form-item",{staticClass:"dr-submitContent"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.refister}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.editdialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"资源转移",visible:e.zhuanyiFormVisible,"before-close":e.beforeclose},on:{"update:visible":function(t){e.zhuanyiFormVisible=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.zhuanyiForm,rules:e.rules,"label-width":"120px"}},[e.ifshowsuperior?i("el-form-item",{attrs:{label:"转移给哪个员工",prop:"zhuanyiList"}},[i("el-select",{attrs:{size:"small",placeholder:"选择转移给哪个员工"},model:{value:e.zhuanyiForm.target,callback:function(t){e.$set(e.zhuanyiForm,"target",t)},expression:"zhuanyiForm.target"}},e._l(e.zhuanyiList,function(e){return i("el-option",{key:e.u_id,attrs:{label:e.u_username,value:e.u_id}})}))],1):e._e(),e._v(" "),i("el-form-item",{staticClass:"dr-submitContent"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.zhuanyiSure}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.zhuanyiFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},o=[],r={render:a,staticRenderFns:o};t.a=r}});